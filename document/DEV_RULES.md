# 개발 규칙 (UI 고도화 → 백엔드 → 마이그레이션)

본 문서는 메뉴별 고도화 작업 시 리스크를 줄이기 위한 **개발 규칙**을 정의합니다.
작업 순서는 **UI 개선/고도화 → 툴(백엔드) 개발 → 마이그레이션**으로 고정합니다.

---

## 1. 작업 원칙

- 메뉴 단위로 하나씩 진행한다.
- UI에 먼저 반영하고, 기능은 “미구현” 표시로 구분한다.
- 백엔드는 UI에서 정의한 툴 이름/권한을 그대로 구현한다.
- 스키마/마이그레이션은 마지막에 적용한다.

---

## 2. 권한 합성 규칙 (필수 고정)

최종 접근 허용은 아래 3가지를 모두 만족해야 한다.

```
최종 허용 = 메뉴 ON AND 역할 허용 AND 기능(툴) 허용
```

- 메뉴 ON/OFF는 상위 게이트다.
- 역할 허용은 역할별 메뉴/기능 접근 권한이다.
- 기능(툴) 허용은 도메인별 권한 매트릭스다.

---

## 3. UI 규칙

- “미구현” 기능은 **굵은 빨간 텍스트 + 미구현 배지**로 표시한다.
- “본인” 기능은 **녹색 라벨**로 표시한다.
- “전용” 기능(예: admin 전용)은 **주황 라벨**로 표시한다.
- 메뉴 ON/OFF 시 하위 기능은 잠금 처리한다(값 유지).
- 메뉴/기능 구조는 **메뉴 → 기능 → 세부 기능** 구조로 유지한다.

---

## 4. 툴 명명 규칙

- UI에서 사용한 툴명은 백엔드에서 그대로 사용한다.
- “내 것” 전용 기능은 `*.listMine`, `*.deleteMine`와 같이 분리한다.
- 공용 조회/관리 기능은 `*.list`, `*.get`, `*.upsert`, `*.delete` 규칙을 따른다.

---

## 5. 미구현 관리 규칙

- UI에 표시된 미구현 툴은 반드시 백엔드 개발 목록으로 등록한다.
- 기능 구현 시 UI의 “미구현” 표시를 제거한다.
- 구현 완료 후 권한 매트릭스가 변경되면 UI도 즉시 동기화한다.

---

## 6. 마이그레이션 규칙

- DB 스키마 변경은 마지막 단계에서 적용한다.
- 마이그레이션 전/후로 권한/메뉴 동작이 동일해야 한다.
- 삭제 기능은 기본적으로 **소프트 삭제**를 사용한다.

---

## 7. 검증 체크리스트 (메뉴별)

각 메뉴 작업 시 다음을 확인한다.

- [ ] 메뉴 ON/OFF 및 역할 허용이 UI에서 정상 동작
- [ ] 미구현/구현 완료 표시가 정확함
- [ ] 툴명이 UI/백엔드에서 일치함
- [ ] 데이터 모델/마이그레이션 순서 준수
- [ ] 권한 합성 규칙 준수

